# 文件乱码

## 常见乱码示例与解决脚本

| 名称   | 示例                                         | 特点                                                   | 产生原因                                                        |
| ------ | -------------------------------------------- | ------------------------------------------------------ | --------------------------------------------------------------- |
| 古文码 | 鐢辨湀瑕佸ソ濂藉涔犲ぉ澶╁悜涓?              | 大都为不认识的古文，并加杂日韩文                       | 以 GBK 方式读取 UTF-8 编码的中文                                |
| 口字码 | ����Ҫ�¨²�ѧϰ������                            | 大部分字符为小方块                                     | 以 UTF-8 的方式读取 GBK 编码的中文                              |
| 符号码 | ç”±æœˆè¦�å¥½å¥½å­¦ä¹ å¤©å¤©å�‘ä¸Š            | 大部分字符为各种符号                                   | 以 ISO8859-1 方式读取 UTF-8 编码的中文                          |
| 拼音码 | ÓÉÔÂÒªºÃºÃÑ§Ï°ÌìÌìÏòÉÏ                       | 大部分字符为头顶带有各种类似声调符号的字母             | 以 ISO8859-1 方式读取 GBK 编码的中文                            |
| 问句码 | 由月要好好学习天天向??                       | 字符串长度为偶数时正确，长度为奇数时最后的字符变为问号 | 以 GBK 方式读取 UTF-8 编码的中文，然后又用 UTF-8 的格式再次读取 |
| 锟拷码 | 锟斤拷锟斤拷要锟矫猴拷学习锟斤拷锟斤拷锟斤拷 | 全中文字符，且大部分字符为“锟斤拷”这几个字符           | 以 UTF-8 方式读取 GBK 编码的中文，然后又用 GBK 的格式再次读取   |

```python
import sys,os

def backup(file:str):
	source = open(file, "rb")
	inner = open(f"${file}.bak", "wb")
	while True:
		date = source.read(1024*1024*10)
		if date:
			inner.write(date)
		else:
			break
	source.close()
	inner.close()

file = sys.argv[1]
fp=os.path.dirname(file)
fn=os.path.basename(file)
backup(file)
os.rename(file, os.path.join(fp,fn.encode('latin1').decode('gbk')))
```