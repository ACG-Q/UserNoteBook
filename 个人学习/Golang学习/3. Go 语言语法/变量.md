---
title: 变量
date created: 星期四, 二月 2日 2023, 2:54:47 下午
date modified: 星期五, 二月 3日 2023, 9:42:03 上午
---

# 变量

## 1. 变量声明

Go 是静态语言，因此其变量必须要有明确的类型，这样编译器才能检查变量的正确性。

声明变量语法：

```go
var 变量名 变量类型
```

后面无需加分号

声明变量举例：声明 a, b 两个变量都为 int 指针类型

```go
var a, b *int
```

Go 语言的基本数据类型：

```go
bool
string
int、int8、int16、int32、int64
uint、uint8、uint16、uint32、uint64、uintptr
byte // uint8 的别名
rune // int32 的别名 代表一个 Unicode 码
float32、float64
complex64、complex128
```

当一个变量被声明后，系统会自动为他赋初始值：  
int 为 0，float 为 0.  0，bool 为 false，string 为空字符串，指针为 nil

变量的命名遵循驼峰命名法，即首个单词小写，每个新单词首字母大写，如 startDate。

变量声明的批量格式：

```go
var (
    a int
    b string
    c []float32
    d func() bool
    e struct {
        x int
    }
)
```

使用关键字 var 和括号，可以将一组变量定义放在一起。

除了上述两种方式，还可以把变量定义和初始化放一起：

```go
名字 := 表达式
```

但这种方式有以下限制：  
1）不能提供数据类型  
2）只能用在函数内部

例如：

```go
func main() {
	x := 100
	a,s := 1, "abc"
}
```

## 2. 变量初始化

在对变量进行声明后，系统会自动对变量进行初始化，如：

```go
整型和浮点型变量的默认值为 0 和 0.0。
字符串变量的默认值为空字符串。
布尔型变量默认为 false。
切片、函数、指针变量的默认为 nil。
```

变量初始化语法：

```go
var 变量名 类型 = 表达式
```

举例：

```go
var aa int = 100
```

也可以省略类型，采用编译器推导类型的格式：

```go
var aa = 100
```

变量赋值，还有一种更精简的写法：

```go
aa := 100
```

注意：由于使用了 := ，而不是 = ，因此这种写法左边的 aa 必须是没有精益过的变量。若定义过，会发生编译错误。

注意：在多个短变量声明和赋值中，至少有一个新声明的变量出现在左值中，即使其他变量名可能是重复声明的，编译也不会报错，如下面写法，不会编译报错：

```go
conn, err := net.Dial("tcp", "127.0.0.1:8080")
conn2, err := net.Dial("tcp", "127.0.0.1:8080")
```

Go 语言的多重赋值，用于变量值的互换：

```go
var a int = 100
var b int = 200
b, a = a, b
fmt.Println(a, b)
```

## 3. 匿名变量

Go 语言支持没有名称的变量、类型或方法，这些统称为匿名变量。匿名变量是为了增强代码的灵活性。  
匿名变量是一个下划线”\_" (\_被称为空白标识符）, \_可以想其他标识符那样用于变量的声明或赋值（任何类型都可以赋值给他），但任何赋值给这个标识符的值都将被抛弃，因此这些值不会在后续的代码中使用。

举例说明：

```go
func GetData() (int, int) {
    return 100, 200
}
func main(){
    a, _ := GetData()
    _, b := GetData()
    fmt.Println(a, b)
}
```

运行结果：

```go
100 200
```

匿名变量，不占用内存空间，不会分配内存。

## 4. 变量作用域

1. 局部变量：函数内定义的变量，作用域为函数体内，在函数调用结束后，变量就会被销毁。形参的作用域同局部变量。  
2. 全局变量：函数外定义的变量，全局变量的声明必须以var开头，如果全局变量和局部变量同名，以局部变量为准。